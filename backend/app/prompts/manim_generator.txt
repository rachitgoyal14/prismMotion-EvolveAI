You are an expert in creating medical animations using Manim (Mathematical Animation Engine).

Generate Manim code for a Mechanism of Action scene with these specifications:

Scene Details:
{scene_json}

**IMAGE HANDLING (CRITICAL FOR PEXELS IMAGES):**
If the scene includes "pexels_image_path", follow these EXACT steps to avoid crashes:

1. **Load image with error handling:**
```python
try:
    bg_image = ImageMobject("{pexels_image_path}")
    bg_image.height = config.frame_height * 0.4  # Use 40% of frame height (NEVER use scale_to_fit_width)
    bg_image.set_opacity(0.6)  # Make semi-transparent for background
    bg_image.to_edge(DOWN, buff=0)  # Position at bottom
except Exception as e:
    # Fallback: colored rectangle if image fails
    bg_image = Rectangle(
        width=config.frame_width,
        height=config.frame_height * 0.4,
        fill_color=BLUE_E,
        fill_opacity=0.2,
        stroke_width=0
    ).to_edge(DOWN, buff=0)
```

2. **Add image to scene WITHOUT animation first (more stable):**
```python
self.add(bg_image)  # Add directly, don't use FadeIn initially
self.play(bg_image.animate.set_opacity(0.7), run_time=1)  # Then animate opacity
```

3. **For fadeout, fade elements separately:**
```python
self.play(
    FadeOut(text_element1),
    FadeOut(text_element2),
    FadeOut(bg_image),  # Fade image separately
    run_time=1
)
```

**WHY THESE RULES:**
- `scale_to_fit_width()` can cause memory issues with large images
- Using `.height = X` is more stable than `.scale_to_fit_width()`
- Adding image first with `self.add()` then animating opacity is more reliable than `FadeIn()`
- Never wrap ImageMobject in nested VGroups for FadeOut
- Always use try/except for image loading

Requirements:
- Use WHITE background (self.camera.background_color = WHITE)
- NO LaTeX fonts - use simple sans-serif text
- Clean, minimal medical illustration style
- Duration: {duration} seconds
- Visual elements: {visual_elements}

CRITICAL IMPORT RULES - YOU MUST FOLLOW THESE:
1. ALWAYS start with: from manim import *
2. ALWAYS import config if using frame dimensions: from manim import config
3. Available constants: UP, DOWN, LEFT, RIGHT, ORIGIN
4. For frame dimensions use: config.frame_width, config.frame_height
5. DO NOT use FRAME_WIDTH or FRAME_HEIGHT directly - they don't exist in newer Manim

Style Guidelines:
- Colors: Use BLUE, RED, GREEN, YELLOW, PURPLE (from manim import *)
- Custom colors: medical_blue = "#2E86AB", medical_red = "#A23B72", medical_green = "#4CAF50"
- Shapes: Circle, Rectangle, Square, Arrow, Polygon, Line for molecules/receptors
- Text: font="Sans", font_size=32-48, color=BLACK (for white background)
- Animations: FadeIn, GrowFromCenter, Transform, Create, Write
- Labels: Use .next_to(), .to_edge(), .shift() for positioning

Custom Shapes (IMPORTANT):
- For checkmarks, crosses, or custom paths: Use VMobject with set_points_as_corners()
- DO NOT use SVGMobject with path_string (it doesn't exist in Manim)
- Example checkmark:
  ```python
  checkmark = VMobject()
  checkmark.set_points_as_corners([
      LEFT + DOWN * 0.5,
      ORIGIN,
      RIGHT * 1.5 + UP
  ])
  checkmark.set_stroke(color=GREEN, width=8)
  ```
- For simple symbols, use Polygon or combine basic shapes

Manim Best Practices:
- Class name MUST be Scene{scene_id} (e.g., Scene1, Scene2)
- Inherit from Scene class
- Use self.play() for animations
- Use self.wait() for pauses between animations
- Group related objects with VGroup
- Use self.camera.background_color = WHITE (not config.background_color)
- For text colors on white background, use BLACK or dark colors

CORRECT Example WITH IMAGE:
```python
from manim import *
from manim import config

class Scene{scene_id}(Scene):
    def construct(self):
        # Set white background
        self.camera.background_color = WHITE
        
        # Define custom colors
        medical_blue = "#2E86AB"
        medical_red = "#A23B72"
        
        # Load background image SAFELY
        try:
            bg_image = ImageMobject("/path/to/image.jpg")
            bg_image.height = config.frame_height * 0.4  # NEVER use scale_to_fit_width
            bg_image.set_opacity(0.6)
            bg_image.to_edge(DOWN, buff=0)
        except Exception as e:
            bg_image = Rectangle(
                width=config.frame_width,
                height=config.frame_height * 0.4,
                fill_color=BLUE_E,
                fill_opacity=0.2,
                stroke_width=0
            ).to_edge(DOWN, buff=0)
        
        # Add image WITHOUT FadeIn (more stable)
        self.add(bg_image)
        self.play(bg_image.animate.set_opacity(0.7), run_time=1)
        
        # Create text overlays
        title = Text("Medical Title", font="Sans", font_size=48, color=BLACK)
        title.to_edge(UP, buff=0.5)
        
        # Animate
        self.play(Write(title))
        self.wait(2)
        
        # Fade out separately
        self.play(
            FadeOut(title),
            FadeOut(bg_image),
            run_time=1
        )
        self.wait(0.5)
```

WRONG - DO NOT DO THIS:
```python
# ❌ Using scale_to_fit_width (causes crashes)
bg_image.scale_to_fit_width(config.frame_width)

# ❌ FadeIn directly on ImageMobject (can hang)
self.play(FadeIn(bg_image))

# ❌ Nested VGroups with ImageMobject
self.play(FadeOut(VGroup(text, VGroup(bg_image))))

# ✅ CORRECT ways:
bg_image.height = config.frame_height * 0.4  # Use .height instead
self.add(bg_image)  # Add first
self.play(bg_image.animate.set_opacity(0.7))  # Then animate opacity
self.play(FadeOut(bg_image))  # Fade separately, not nested
```

Generate COMPLETE, WORKING Manim code for this scene. 

VALIDATION CHECKLIST BEFORE RETURNING:
✓ Starts with "from manim import *"
✓ Imports config if using frame dimensions: "from manim import config"
✓ Class name is Scene{scene_id}
✓ Uses self.camera.background_color = WHITE
✓ All text uses color=BLACK (for white background)
✓ If pexels_image_path exists: Uses try/except, .height (not scale_to_fit_width), self.add() then animate opacity
✓ No nested VGroups around ImageMobject in FadeOut
✓ All animations use self.play() or self.wait()
✓ Code is syntactically valid Python

Return ONLY valid JSON:
{{
  "scene_id": {scene_id},
  "manim_code": "from manim import *\nfrom manim import config\n\nclass Scene{scene_id}(Scene):\n    def construct(self):\n        self.camera.background_color = WHITE\n        ..."
}}